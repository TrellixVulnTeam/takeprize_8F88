(this.webpackJsonptakeprize=this.webpackJsonptakeprize||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),i=n(18),s=n.n(i),a=(n(23),n(24),n(4)),o=(n(25),n(0));function u(){var e=r.a.useState({colorA:"#fff7e8",colorB:"#e37815"}),t=Object(a.a)(e,2),n=t[0],c=t[1];r.a.useEffect((function(){var e=setInterval((function(){c((function(e){var t=e.colorA;return{colorA:e.colorB,colorB:t}}))}),500);return function(){clearInterval(e)}}),[n]);var i=function(){for(var e=[],t=0;t<4;t++)e.push(Object(o.jsx)("i",{style:{background:n.colorA}},t));return e},s=function(){for(var e=[],t=0;t<4;t++)e.push(Object(o.jsx)("i",{style:{background:n.colorB}},t));return e};return Object(o.jsxs)("ul",{className:"wheel-light",children:[Object(o.jsx)("li",{children:s()}),Object(o.jsx)("li",{children:i()}),Object(o.jsx)("li",{children:s()}),Object(o.jsx)("li",{children:i()}),Object(o.jsx)("li",{children:s()}),Object(o.jsx)("li",{children:i()})]})}var l=n(5),j=n.n(l),b=n(6),f=n(7),O=n.n(f),p=(n(46),n(9)),d=n(3),h=n.n(d),x=new Array(6).fill(0).map((function(){return Object(p.a)()}));function m(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(a.a)(i,2),u=s[0],l=s[1],f=Object(c.useState)({angle:0,transition:"none"}),d=Object(a.a)(f,2),m=d[0],v=d[1];return Object(c.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()("https://qc1hz1.fn.thelarkcloud.com/prizeinfo");case 2:if(t=e.sent,n=t.data.response,(c=n.length)<6)for(i=c;i<6;i++)n.push({prize_name:"\u8c22\u8c22\u53c2\u4e0e",isprize:!1,prize_id:Object(p.a)()});if(c>6)for(;n.length>6;)n.pop();r(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){var e=h.a.subscribe("Prize",(function(e,t){l(t);var n=60*-t.prize_index+3600;v({angle:n,transition:"all 5s ease-out"}),setTimeout((function(){v({angle:n%360,transition:"none"}),h.a.publish("Twinkle",t.msg)}),5e3)}));return function(){h.a.unsubscribe(e)}}),[u,m]),Object(o.jsx)("ul",{id:"wheel",className:"wheel-list",style:{transform:"rotate(".concat(m.angle,"deg)"),transition:m.transition},children:x.map((function(e,t){return Object(o.jsxs)("li",{children:[Object(o.jsx)("i",{}),Object(o.jsxs)("div",{className:"prize",children:[Object(o.jsx)("p",{children:n[t]?n[t].prize_name:""}),Object(o.jsx)("img",{src:"/images/prize_img".concat(t+1,".png"),alt:""})]})]},e)}))})}n(48);function v(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()("https://qc1hz1.fn.thelarkcloud.com/takePrize");case 2:t=e.sent,h.a.publish("Prize",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{id:"pointer",className:"wheel-pointer",children:Object(o.jsx)("div",{id:"button",className:"button",onClick:e,children:Object(o.jsx)("strong",{children:"\u62bd"})})})}n(49);function g(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=h.a.subscribe("Twinkle",(function(e,t){r("twinkle 0.8s"),setTimeout((function(){r("none"),h.a.publish("Showprize",t)}),1e3)}));return function(){h.a.unsubscribe(e)}}),[n]),Object(o.jsx)("div",{className:"twinkle-box",children:Object(o.jsx)("div",{id:"twinkle",className:"twinkle",style:{animation:n}})})}n(50);function k(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(a.a)(i,2),u=s[0],l=s[1];Object(c.useEffect)((function(){var e=h.a.subscribe("Showprize",(function(e,t){r(t),l("block")}));return function(){h.a.unsubscribe(e)}}),[n]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"mask",style:{display:u}}),Object(o.jsxs)("div",{className:"show-prize",style:{display:u},children:[Object(o.jsx)("img",{src:"./images/prize.png",alt:"",className:"prize-container"}),Object(o.jsx)("div",{className:"prize-info",children:n}),Object(o.jsx)("img",{src:"./images/close.png",alt:"",className:"close",onClick:function(){l("none")}})]})]})}var w=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"wheel",children:[Object(o.jsx)(u,{}),Object(o.jsx)(m,{}),Object(o.jsx)(v,{}),Object(o.jsx)(g,{})]}),Object(o.jsx)(k,{})]})};n(51);s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.f45ba83b.chunk.js.map