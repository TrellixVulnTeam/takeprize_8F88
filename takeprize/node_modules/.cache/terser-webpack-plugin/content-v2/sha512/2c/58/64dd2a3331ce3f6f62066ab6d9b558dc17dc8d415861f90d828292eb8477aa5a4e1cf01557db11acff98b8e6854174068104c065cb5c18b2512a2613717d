{"code":"(this.webpackJsonptakeprize=this.webpackJsonptakeprize||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){\"use strict\";n.r(t);var c=n(1),r=n.n(c),i=n(18),s=n.n(i),a=(n(23),n(24),n(4)),o=(n(25),n(0));function u(){var e=r.a.useState({colorA:\"#fff7e8\",colorB:\"#e37815\"}),t=Object(a.a)(e,2),n=t[0],c=t[1];r.a.useEffect((function(){var e=setInterval((function(){c((function(e){var t=e.colorA;return{colorA:e.colorB,colorB:t}}))}),500);return function(){clearInterval(e)}}),[n]);var i=function(){for(var e=[],t=0;t<4;t++)e.push(Object(o.jsx)(\"i\",{style:{background:n.colorA}},t));return e},s=function(){for(var e=[],t=0;t<4;t++)e.push(Object(o.jsx)(\"i\",{style:{background:n.colorB}},t));return e};return Object(o.jsxs)(\"ul\",{className:\"wheel-light\",children:[Object(o.jsx)(\"li\",{children:s()}),Object(o.jsx)(\"li\",{children:i()}),Object(o.jsx)(\"li\",{children:s()}),Object(o.jsx)(\"li\",{children:i()}),Object(o.jsx)(\"li\",{children:s()}),Object(o.jsx)(\"li\",{children:i()})]})}var l=n(5),j=n.n(l),b=n(6),f=n(7),O=n.n(f),p=(n(46),n(9)),d=n(3),h=n.n(d),x=new Array(6).fill(0).map((function(){return Object(p.a)()}));function m(){var e=Object(c.useState)([]),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(a.a)(i,2),u=s[0],l=s[1],f=Object(c.useState)({angle:0,transition:\"none\"}),d=Object(a.a)(f,2),m=d[0],v=d[1];return Object(c.useEffect)((function(){(function(){var e=Object(b.a)(j.a.mark((function e(){var t,n,c,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()(\"https://qc1hz1.fn.thelarkcloud.com/prizeinfo\");case 2:if(t=e.sent,n=t.data.response,(c=n.length)<6)for(i=c;i<6;i++)n.push({prize_name:\"\\u8c22\\u8c22\\u53c2\\u4e0e\",isprize:!1,prize_id:Object(p.a)()});if(c>6)for(;n.length>6;)n.pop();r(n);case 8:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.useEffect)((function(){var e=h.a.subscribe(\"Prize\",(function(e,t){l(t);var n=60*-t.prize_index+3600;v({angle:n,transition:\"all 5s ease-out\"}),setTimeout((function(){v({angle:n%360,transition:\"none\"}),h.a.publish(\"Twinkle\",t.msg)}),5e3)}));return function(){h.a.unsubscribe(e)}}),[u,m]),Object(o.jsx)(\"ul\",{id:\"wheel\",className:\"wheel-list\",style:{transform:\"rotate(\".concat(m.angle,\"deg)\"),transition:m.transition},children:x.map((function(e,t){return Object(o.jsxs)(\"li\",{children:[Object(o.jsx)(\"i\",{}),Object(o.jsxs)(\"div\",{className:\"prize\",children:[Object(o.jsx)(\"p\",{children:n[t]?n[t].prize_name:\"\"}),Object(o.jsx)(\"img\",{src:\"/images/prize_img\".concat(t+1,\".png\"),alt:\"\"})]})]},e)}))})}n(48);function v(){var e=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()(\"https://qc1hz1.fn.thelarkcloud.com/takePrize\");case 2:t=e.sent,h.a.publish(\"Prize\",t.data);case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)(\"div\",{id:\"pointer\",className:\"wheel-pointer\",children:Object(o.jsx)(\"div\",{id:\"button\",className:\"button\",onClick:e,children:Object(o.jsx)(\"strong\",{children:\"\\u62bd\"})})})}n(49);function g(){var e=Object(c.useState)(),t=Object(a.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=h.a.subscribe(\"Twinkle\",(function(e,t){r(\"twinkle 0.8s\"),setTimeout((function(){r(\"none\"),h.a.publish(\"Showprize\",t)}),1e3)}));return function(){h.a.unsubscribe(e)}}),[n]),Object(o.jsx)(\"div\",{className:\"twinkle-box\",children:Object(o.jsx)(\"div\",{id:\"twinkle\",className:\"twinkle\",style:{animation:n}})})}n(50);function k(){var e=Object(c.useState)(\"\"),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(),s=Object(a.a)(i,2),u=s[0],l=s[1];Object(c.useEffect)((function(){var e=h.a.subscribe(\"Showprize\",(function(e,t){r(t),l(\"block\")}));return function(){h.a.unsubscribe(e)}}),[n]);return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(\"div\",{className:\"mask\",style:{display:u}}),Object(o.jsxs)(\"div\",{className:\"show-prize\",style:{display:u},children:[Object(o.jsx)(\"img\",{src:\"./images/prize.png\",alt:\"\",className:\"prize-container\"}),Object(o.jsx)(\"div\",{className:\"prize-info\",children:n}),Object(o.jsx)(\"img\",{src:\"./images/close.png\",alt:\"\",className:\"close\",onClick:function(){l(\"none\")}})]})]})}var w=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(\"div\",{className:\"wheel\",children:[Object(o.jsx)(u,{}),Object(o.jsx)(m,{}),Object(o.jsx)(v,{}),Object(o.jsx)(g,{})]}),Object(o.jsx)(k,{})]})};n(51);s.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById(\"root\"))}},[[52,1,2]]]);","name":"static/js/main.f45ba83b.chunk.js","map":{"version":3,"sources":["static/js/main.f45ba83b.chunk.js"],"names":["this","push","23","module","exports","__webpack_require__","24","25","46","48","49","50","52","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","jsx_runtime","Wheel_light_Wheel_light","_React$useState","a","useState","colorA","colorB","_React$useState2","Object","lightcolors","setlight","useEffect","timer","setInterval","_ref","clearInterval","li4A","res","i","style","background","li4B","className","children","regenerator","regenerator_default","asyncToGenerator","axios","axios_default","index_browser","pubsub","pubsub_default","initdata","Array","fill","map","WheelList","_useState","_useState2","data","setdata","_useState3","_useState4","prize","setprize","_useState5","angle","transition","_useState6","rotate_animate","setrotate","mark","_callee","result","prize_info","wrap","_context","prev","next","sent","response","length","prize_name","isprize","prize_id","pop","stop","apply","arguments","fetchData","token","subscribe","msg","item","prize_index","setTimeout","publish","unsubscribe","id","transform","concat","index","src","alt","WheelPointer","takeprize","onClick","Twinkle_Twinkle","twinkle_animate","settwinkle","animation","Showprize_Showprize","prizemsg","setprizemsg","display","setdisplay","src_App","render","StrictMode","document","getElementById"],"mappings":"CAACA,KAA4B,sBAAIA,KAA4B,uBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAE1EC,GACA,SAAUC,EAAQC,EAASC,KAM3BC,GACA,SAAUH,EAAQC,EAASC,KAM3BE,GACA,SAAUJ,EAAQC,EAASC,KAM3BG,GACA,SAAUL,EAAQC,EAASC,KAM3BI,GACA,SAAUN,EAAQC,EAASC,KAM3BK,GACA,SAAUP,EAAQC,EAASC,KAM3BM,GACA,SAAUR,EAAQC,EAASC,KAM3BO,GACA,SAAUT,EAAQU,EAAqBR,GAE7C,aAEAA,EAAoBS,EAAED,GAGtB,IAAIE,EAAQV,EAAoB,GAC5BW,EAA6BX,EAAoBY,EAAEF,GAGnDG,EAAYb,EAAoB,IAChCc,EAAiCd,EAAoBY,EAAEC,GASvDE,GANMf,EAAoB,IAGpBA,EAAoB,IAGVA,EAAoB,IAMpCgB,GAHchB,EAAoB,IAGpBA,EAAoB,IAGtC,SAASiB,IAA0B,IAAIC,EAAgBP,EAAcQ,EAAEC,SAAS,CAACC,OAAO,UAAUC,OAAO,YAAYC,EAAiBC,OAAOT,EAA+B,EAAtCS,CAAyCN,EAAgB,GAAGO,EAAYF,EAAiB,GAAGG,EAASH,EAAiB,GAC5PZ,EAAcQ,EAAEQ,WAAU,WAAW,IAAIC,EAAMC,aAAY,WAAWH,GAAS,SAASI,GAAM,IAAIT,EAAOS,EAAKT,OAA0B,MAAM,CAACA,OAAnBS,EAAKR,OAA4BA,OAAOD,QAAa,KAAK,OAAO,WAAWU,cAAcH,MAAW,CAACH,IAClO,IAAIO,EAAK,WAA2B,IAAX,IAAIC,EAAI,GAAWC,EAAE,EAAEA,EAAE,EAAEA,IAAKD,EAAIrC,KAAkB4B,OAAOR,EAAiB,IAAxBQ,CAA2B,IAAI,CAACW,MAAM,CAACC,WAAWX,EAAYJ,SAASa,IAAK,OAAOD,GAC9JI,EAAK,WAA2B,IAAX,IAAIJ,EAAI,GAAWC,EAAE,EAAEA,EAAE,EAAEA,IAAKD,EAAIrC,KAAkB4B,OAAOR,EAAiB,IAAxBQ,CAA2B,IAAI,CAACW,MAAM,CAACC,WAAWX,EAAYH,SAASY,IAAK,OAAOD,GAAM,OACxKT,OAAOR,EAAkB,KADmK,CAChK,KAAK,CAACsB,UAAU,cAAcC,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASF,MAAsBb,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASP,MAAsBR,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASF,MAAsBb,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASP,MAAsBR,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASF,MAAsBb,OAAOR,EAAiB,IAAxBQ,CAA2B,KAAK,CAACe,SAASP,SAE3b,IAAIQ,EAAcxC,EAAoB,GAClCyC,EAAmCzC,EAAoBY,EAAE4B,GAGzDE,EAAmB1C,EAAoB,GAGvC2C,EAAQ3C,EAAoB,GAC5B4C,EAA6B5C,EAAoBY,EAAE+B,GAMnDE,GAHa7C,EAAoB,IAGjBA,EAAoB,IAGpC8C,EAAS9C,EAAoB,GAC7B+C,EAA8B/C,EAAoBY,EAAEkC,GAIpDE,EAAS,IAAIC,MAAM,GAAGC,KAAK,GAAGC,KAAI,WAAW,OAAO3B,OAAOqB,EAA8B,EAArCrB,MAA6C,SAAS4B,IAC9G,IAAIC,EAAU7B,OAAOd,EAAgB,SAAvBc,CAA0B,IAAI8B,EAAW9B,OAAOT,EAA+B,EAAtCS,CAAyC6B,EAAU,GAAGE,EAAKD,EAAW,GAAGE,EAAQF,EAAW,GAC/IG,EAAWjC,OAAOd,EAAgB,SAAvBc,GAA4BkC,EAAWlC,OAAOT,EAA+B,EAAtCS,CAAyCiC,EAAW,GAAGE,EAAMD,EAAW,GAAGE,EAASF,EAAW,GACjJG,EAAWrC,OAAOd,EAAgB,SAAvBc,CAA0B,CAACsC,MAAM,EAAEC,WAAW,SAASC,EAAWxC,OAAOT,EAA+B,EAAtCS,CAAyCqC,EAAW,GAAGI,EAAeD,EAAW,GAAGE,EAAUF,EAAW,GAQhD,OAP1IxC,OAAOd,EAAiB,UAAxBc,EAA2B,YAAsC,WAAW,IAAIM,EAAKN,OAAOkB,EAAkC,EAAzClB,CAAyDiB,EAAoBtB,EAAEgD,MAAK,SAASC,IAAU,IAAIC,EAAOC,EAAW1D,EAAEsB,EAAE,OAAOO,EAAoBtB,EAAEoD,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAkB,OAAhBF,EAASE,KAAK,EAAS9B,GAAAA,CAAgB,gDAAgD,KAAK,EAChZ,GADkZyB,EAAOG,EAASG,KAAKL,EAAWD,EAAOd,KAAKqB,UACldhE,EAAE0D,EAAWO,QAAY,EAAG,IAAI3C,EAAEtB,EAAEsB,EAAE,EAAEA,IAAKoC,EAAW1E,KAAK,CAACkF,WAAW,2BAAOC,SAAQ,EAAMC,SAASxD,OAAOqB,EAA8B,EAArCrB,KAA8C,GAAGZ,EAAE,EAAG,KAAM0D,EAAWO,OAAO,GAAGP,EAAWW,MAAQzB,EAAQc,GAAY,KAAK,EAAE,IAAI,MAAM,OAAOE,EAASU,UAAWd,OAAa,OAAO,WAAqB,OAAOtC,EAAKqD,MAAMxF,KAAKyF,aAD1Q,EAC2RC,KAAc,IAC1W7D,OAAOd,EAAiB,UAAxBc,EAA2B,WAAW,IAAI8D,EAAMvC,EAAe5B,EAAEoE,UAAU,SAAQ,SAASC,EAAIC,GAChG7B,EAAS6B,GACT,IAAI3B,EAAwB,IAAjB2B,EAAKC,YAAe,KAAKxB,EAAU,CAACJ,MAAMA,EAAMC,WAAW,oBACtE4B,YAAW,WACXzB,EAAU,CAACJ,MAAMA,EAAM,IAAIC,WAAW,SACtChB,EAAe5B,EAAEyE,QAAQ,UAAUH,EAAKD,OAAO,QAAS,OAAO,WAAWzC,EAAe5B,EAAE0E,YAAYP,MAAW,CAAC3B,EAAMM,IACzHzC,OAAOR,EAAiB,IADsI,CACnI,KAAK,CAAC8E,GAAG,QAAQxD,UAAU,aAAaH,MAAM,CAAC4D,UAAU,UAAUC,OAAO/B,EAAeH,MAAM,QAAQC,WAAWE,EAAeF,YAAYxB,SAASS,EAASG,KAAI,SAASsC,EAAKQ,GAAO,OAAmBzE,OAAOR,EAAkB,KAAzBQ,CAA4B,KAAK,CAACe,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2B,IAAI,IAAiBA,OAAOR,EAAkB,KAAzBQ,CAA4B,MAAM,CAACc,UAAU,QAAQC,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2B,IAAI,CAACe,SAASgB,EAAK0C,GAAO1C,EAAK0C,GAAOnB,WAAW,KAAkBtD,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAAC0E,IAAI,oBAAoBF,OAAOC,EAAM,EAAE,QAAQE,IAAI,UAAUV,QAEpkBzF,EAAoB,IAGxC,SAASoG,IACT,IAAIC,EAAuB,WAAW,IAAIvE,EAAKN,OAAOkB,EAAkC,EAAzClB,CAAyDiB,EAAoBtB,EAAEgD,MAAK,SAASC,IAAU,IAAIC,EAAO,OAAO5B,EAAoBtB,EAAEoD,MAAK,SAAkBC,GAAU,OAAS,OAAOA,EAASC,KAAKD,EAASE,MAAM,KAAK,EAAkB,OAAhBF,EAASE,KAAK,EAAS9B,GAAAA,CAAgB,gDAAgD,KAAK,EAAEyB,EAAOG,EAASG,KAAK5B,EAAe5B,EAAEyE,QAAQ,QAAQvB,EAAOd,MAAM,KAAK,EAAE,IAAI,MAAM,OAAOiB,EAASU,UAAWd,OAAa,OAAO,WAAqB,OAAOtC,EAAKqD,MAAMxF,KAAKyF,YAArgB,GAAshB,OACjjB5D,OAAOR,EAAiB,IAD6iB,CAC1iB,MAAM,CAAC8E,GAAG,UAAUxD,UAAU,gBAAgBC,SAAsBf,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAACsE,GAAG,SAASxD,UAAU,SAASgE,QAAQD,EAAU9D,SAAsBf,OAAOR,EAAiB,IAAxBQ,CAA2B,SAAS,CAACe,SAAS,eAExOvC,EAAoB,IAGlC,SAASuG,IACT,IAAIlD,EAAU7B,OAAOd,EAAgB,SAAvBc,GAA4B8B,EAAW9B,OAAOT,EAA+B,EAAtCS,CAAyC6B,EAAU,GAAGmD,EAAgBlD,EAAW,GAAGmD,EAAWnD,EAAW,GAI5B,OAHnI9B,OAAOd,EAAiB,UAAxBc,EAA2B,WAAW,IAAI8D,EAAMvC,EAAe5B,EAAEoE,UAAU,WAAU,SAASC,EAAIC,GAClGgB,EAAW,gBACXd,YAAW,WAAWc,EAAW,QACjC1D,EAAe5B,EAAEyE,QAAQ,YAAYH,KAAQ,QAAS,OAAO,WAAW1C,EAAe5B,EAAE0E,YAAYP,MAAW,CAACkB,IACjHhF,OAAOR,EAAiB,IAD+H,CAC5H,MAAM,CAACsB,UAAU,cAAcC,SAAsBf,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAACsE,GAAG,UAAUxD,UAAU,UAAUH,MAAM,CAACuE,UAAUF,OAEpJxG,EAAoB,IAGpC,SAAS2G,IAAsB,IAAItD,EAAU7B,OAAOd,EAAgB,SAAvBc,CAA0B,IAAI8B,EAAW9B,OAAOT,EAA+B,EAAtCS,CAAyC6B,EAAU,GAAGuD,EAAStD,EAAW,GAAGuD,EAAYvD,EAAW,GAAOG,EAAWjC,OAAOd,EAAgB,SAAvBc,GAA4BkC,EAAWlC,OAAOT,EAA+B,EAAtCS,CAAyCiC,EAAW,GAAGqD,EAAQpD,EAAW,GAAGqD,EAAWrD,EAAW,GACtVlC,OAAOd,EAAiB,UAAxBc,EAA2B,WAAW,IAAI8D,EAAMvC,EAAe5B,EAAEoE,UAAU,aAAY,SAASC,EAAIC,GACpGoB,EAAYpB,GACZsB,EAAW,YAAY,OAAO,WAAWhE,EAAe5B,EAAE0E,YAAYP,MAAW,CAACsB,IAClC,OAChDpF,OAAOR,EAAkB,KAD2C,CACxCA,EAAsB,SAAE,CAACuB,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAACc,UAAU,OAAOH,MAAM,CAAC2E,QAAQA,KAAwBtF,OAAOR,EAAkB,KAAzBQ,CAA4B,MAAM,CAACc,UAAU,aAAaH,MAAM,CAAC2E,QAAQA,GAASvE,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAAC0E,IAAI,qBAAqBC,IAAI,GAAG7D,UAAU,oBAAiCd,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAACc,UAAU,aAAaC,SAASqE,IAAwBpF,OAAOR,EAAiB,IAAxBQ,CAA2B,MAAM,CAAC0E,IAAI,qBAAqBC,IAAI,GAAG7D,UAAU,QAAQgE,QADhiB,WAAiBS,EAAW,iBAG8d,IAAIC,EAAxgB,WAAmB,OAAmBxF,OAAOR,EAAkB,KAAzBQ,CAA4BR,EAAsB,SAAE,CAACuB,SAAS,CAAcf,OAAOR,EAAkB,KAAzBQ,CAA4B,MAAM,CAACc,UAAU,QAAQC,SAAS,CAAcf,OAAOR,EAAiB,IAAxBQ,CAA2BP,EAAwB,IAAiBO,OAAOR,EAAiB,IAAxBQ,CAA2B4B,EAAU,IAAiB5B,OAAOR,EAAiB,IAAxBQ,CAA2B4E,EAAa,IAAiB5E,OAAOR,EAAiB,IAAxBQ,CAA2B+E,EAAgB,OAAoB/E,OAAOR,EAAiB,IAAxBQ,CAA2BmF,EAAoB,QAEhd3G,EAAoB,IAGnCc,EAAkBK,EAAE8F,OAAoBzF,OAAOR,EAAiB,IAAxBQ,CAA2Bb,EAAcQ,EAAE+F,WAAW,CAAC3E,SAAsBf,OAAOR,EAAiB,IAAxBQ,CAA2BwF,EAAQ,MAAMG,SAASC,eAAe,WAIpL,CAAC,CAAC,GAAG,EAAE"},"input":"(this[\"webpackJsonptakeprize\"] = this[\"webpackJsonptakeprize\"] || []).push([[0],{\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 24:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 25:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 46:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 48:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 49:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(18);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(4);\n\n// EXTERNAL MODULE: ./src/component/Wheel-light/index.css\nvar Wheel_light = __webpack_require__(25);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/component/Wheel-light/index.jsx\nfunction Wheel_light_Wheel_light(){var _React$useState=react_default.a.useState({colorA:'#fff7e8',colorB:'#e37815'}),_React$useState2=Object(slicedToArray[\"a\" /* default */])(_React$useState,2),lightcolors=_React$useState2[0],setlight=_React$useState2[1];//设置定时器，让A组、B组灯交替闪烁\nreact_default.a.useEffect(function(){var timer=setInterval(function(){setlight(function(_ref){var colorA=_ref.colorA,colorB=_ref.colorB;return{colorA:colorB,colorB:colorA};});},500);return function(){clearInterval(timer);};},[lightcolors]);//A组灯光\nvar li4A=function li4A(){var res=[];for(var i=0;i<4;i++){res.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{background:lightcolors.colorA}},i));}return res;};//B组灯光\nvar li4B=function li4B(){var res=[];for(var i=0;i<4;i++){res.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{style:{background:lightcolors.colorB}},i));}return res;};return/*#__PURE__*/ (// 外层闪烁\nObject(jsx_runtime[\"jsxs\"])(\"ul\",{className:\"wheel-light\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4B()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4A()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4B()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4A()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4B()}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:li4A()})]}));}\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(5);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(6);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(7);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ./src/component/Wheel-list/index.css\nvar Wheel_list = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./node_modules/nanoid/index.browser.js + 1 modules\nvar index_browser = __webpack_require__(9);\n\n// EXTERNAL MODULE: ./node_modules/pubsub-js/src/pubsub.js\nvar pubsub = __webpack_require__(3);\nvar pubsub_default = /*#__PURE__*/__webpack_require__.n(pubsub);\n\n// CONCATENATED MODULE: ./src/component/Wheel-list/index.jsx\n//包含6个唯一id的数组，用来生成奖项\nvar initdata=new Array(6).fill(0).map(function(){return Object(index_browser[\"a\" /* nanoid */])();});function WheelList(){//奖品信息\nvar _useState=Object(react[\"useState\"])([]),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),data=_useState2[0],setdata=_useState2[1];//奖品index和中奖消息\nvar _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),prize=_useState4[0],setprize=_useState4[1];// 旋转动画\nvar _useState5=Object(react[\"useState\"])({angle:0,transition:'none'}),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),rotate_animate=_useState6[0],setrotate=_useState6[1];//从后台获取需要进行展示的奖品信息，并且保证为6个\nObject(react[\"useEffect\"])(function(){var fetchData=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var result,prize_info,n,i;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios_default()('https://qc1hz1.fn.thelarkcloud.com/prizeinfo');case 2:result=_context.sent;prize_info=result.data.response;// 计算奖品数量，保证其为6个\nn=prize_info.length;if(n<6){for(i=n;i<6;i++){prize_info.push({prize_name:\"谢谢参与\",isprize:false,prize_id:Object(index_browser[\"a\" /* nanoid */])()});}}if(n>6){while(prize_info.length>6){prize_info.pop();}}setdata(prize_info);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);//订阅消息：收到消息后进行旋转\nObject(react[\"useEffect\"])(function(){var token=pubsub_default.a.subscribe('Prize',function(msg,item){// 保存奖品index和中奖消息msg\nsetprize(item);// 计算要旋转的角度并旋转\nvar angle=-item.prize_index*60+3600;setrotate({angle:angle,transition:'all 5s ease-out'});//旋转完成后\nsetTimeout(function(){//对角度进行处理，以便下次旋转\nsetrotate({angle:angle%360,transition:'none'});//通知闪烁,同时把中奖消息发送过去\npubsub_default.a.publish('Twinkle',item.msg);},5000);});return function(){pubsub_default.a.unsubscribe(token);};},[prize,rotate_animate]);return/*#__PURE__*/ (//中间奖品\nObject(jsx_runtime[\"jsx\"])(\"ul\",{id:\"wheel\",className:\"wheel-list\",style:{transform:\"rotate(\".concat(rotate_animate.angle,\"deg)\"),transition:rotate_animate.transition},children:initdata.map(function(item,index){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"li\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"i\",{}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"prize\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:data[index]?data[index].prize_name:\"\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"/images/prize_img\".concat(index+1,\".png\"),alt:\"\"})]})]},item);})}));}\n// EXTERNAL MODULE: ./src/component/Wheel-pointer/index.css\nvar Wheel_pointer = __webpack_require__(48);\n\n// CONCATENATED MODULE: ./src/component/Wheel-pointer/index.jsx\nfunction WheelPointer(){//点击按钮后从后台获取奖品index和中奖消息msg，通知Wheel-list进行旋转\nvar takeprize=/*#__PURE__*/function(){var _ref=Object(asyncToGenerator[\"a\" /* default */])(/*#__PURE__*/regenerator_default.a.mark(function _callee(){var result;return regenerator_default.a.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios_default()('https://qc1hz1.fn.thelarkcloud.com/takePrize');case 2:result=_context.sent;pubsub_default.a.publish('Prize',result.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function takeprize(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/ (// 中心指针   \nObject(jsx_runtime[\"jsx\"])(\"div\",{id:\"pointer\",className:\"wheel-pointer\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"button\",className:\"button\",onClick:takeprize,children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"strong\",{children:\"\\u62BD\"})})}));}\n// EXTERNAL MODULE: ./src/component/Twinkle/index.css\nvar Twinkle = __webpack_require__(49);\n\n// CONCATENATED MODULE: ./src/component/Twinkle/index.jsx\nfunction Twinkle_Twinkle(){//闪烁动画状态\nvar _useState=Object(react[\"useState\"])(),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),twinkle_animate=_useState2[0],settwinkle=_useState2[1];//订阅消息：收到消息后进行闪烁动画，之后通知Showprize展示奖品信息\nObject(react[\"useEffect\"])(function(){var token=pubsub_default.a.subscribe('Twinkle',function(msg,item){// 进行闪烁动画\nsettwinkle('twinkle 0.8s');// 通知Showprize展示奖品信息\nsetTimeout(function(){settwinkle('none');// 通知展示中奖消息\npubsub_default.a.publish('Showprize',item);},1000);});return function(){pubsub_default.a.unsubscribe(token);};},[twinkle_animate]);return/*#__PURE__*/ (// 中奖后闪烁\nObject(jsx_runtime[\"jsx\"])(\"div\",{className:\"twinkle-box\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"twinkle\",className:\"twinkle\",style:{animation:twinkle_animate}})}));}\n// EXTERNAL MODULE: ./src/component/Showprize/index.css\nvar Showprize = __webpack_require__(50);\n\n// CONCATENATED MODULE: ./src/component/Showprize/index.jsx\nfunction Showprize_Showprize(){var _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),prizemsg=_useState2[0],setprizemsg=_useState2[1];var _useState3=Object(react[\"useState\"])(),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),display=_useState4[0],setdisplay=_useState4[1];// 订阅消息：收到消息后设置中奖消息，弹出中奖信息\nObject(react[\"useEffect\"])(function(){var token=pubsub_default.a.subscribe('Showprize',function(msg,item){//设置中奖消息\nsetprizemsg(item);//弹出中奖信息\nsetdisplay('block');});return function(){pubsub_default.a.unsubscribe(token);};},[prizemsg]);//关闭中奖信息\nvar close=function close(){setdisplay('none');};return/*#__PURE__*/ (// 遮罩层+弹出奖品\nObject(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"mask\",style:{display:display}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"show-prize\",style:{display:display},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"./images/prize.png\",alt:\"\",className:\"prize-container\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"prize-info\",children:prizemsg}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{src:\"./images/close.png\",alt:\"\",className:\"close\",onClick:close})]})]}));}\n// CONCATENATED MODULE: ./src/App.js\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"wheel\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Wheel_light_Wheel_light,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WheelList,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WheelPointer,{}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Twinkle_Twinkle,{})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Showprize_Showprize,{})]});}/* harmony default export */ var src_App = (App_App);\n// EXTERNAL MODULE: ./node_modules/lib-flexible/flexible.js\nvar flexible = __webpack_require__(51);\n\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[52,1,2]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\index.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\App.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\component\\Wheel-light\\index.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\component\\Wheel-list\\index.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\component\\Wheel-pointer\\index.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\component\\Twinkle\\index.css","C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\mini-css-extract-plugin\\dist\\loader.js??ref--5-oneOf-4-0!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\css-loader\\dist\\cjs.js??ref--5-oneOf-4-1!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\node_modules\\postcss-loader\\src\\index.js??postcss!C:\\Users\\田天\\Desktop\\抽奖轮盘\\成品第二次修改\\takeprize\\src\\component\\Showprize\\index.css","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/component/Wheel-light/index.jsx","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/component/Wheel-list/index.jsx","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/component/Wheel-pointer/index.jsx","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/component/Twinkle/index.jsx","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/component/Showprize/index.jsx","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/App.js","C:/Users/田天/Desktop/抽奖轮盘/成品第二次修改/takeprize/src/index.js"],"names":["Wheel_light","React","useState","colorA","colorB","lightcolors","setlight","useEffect","timer","setInterval","clearInterval","li4A","res","i","push","background","li4B","initdata","Array","fill","map","nanoid","WheelList","data","setdata","prize","setprize","angle","transition","rotate_animate","setrotate","fetchData","axios","result","prize_info","response","n","length","prize_name","isprize","prize_id","pop","token","PubSub","subscribe","msg","item","prize_index","setTimeout","publish","unsubscribe","transform","index","WheelPointer","takeprize","Twinkle","twinkle_animate","settwinkle","animation","Showprize","prizemsg","setprizemsg","display","setdisplay","close","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import React, { useEffect } from 'react'\r\nimport './index.css'\r\n\r\nexport default function Wheel_light() {\r\n    const [lightcolors,setlight] = React.useState({colorA:'#fff7e8',colorB:'#e37815'});\r\n    //设置定时器，让A组、B组灯交替闪烁\r\n    React.useEffect(() => {\r\n        const timer=setInterval(()=>{\r\n            setlight(({colorA,colorB})=>{return {colorA:colorB,colorB:colorA}});\r\n        },500);\r\n        return () => {\r\n            clearInterval(timer);\r\n        }\r\n    }, [lightcolors])\r\n    //A组灯光\r\n    const li4A=()=>{\r\n        const res=[];\r\n        for(let i=0;i<4;i++){\r\n            res.push(<i key={i} style={{background:lightcolors.colorA}}></i>);\r\n        }\r\n        return res;\r\n    }\r\n    //B组灯光\r\n    const li4B=()=>{\r\n        const res=[];\r\n        for(let i=0;i<4;i++){\r\n            res.push(<i key={i} style={{background:lightcolors.colorB}}></i>);\r\n        }\r\n        return res;\r\n    }\r\n    return (\r\n        // 外层闪烁\r\n        <ul className=\"wheel-light\">\r\n            <li>{li4B()}</li>\r\n            <li>{li4A()}</li>\r\n            <li>{li4B()}</li>\r\n            <li>{li4A()}</li>\r\n            <li>{li4B()}</li>\r\n            <li>{li4A()}</li>\r\n        </ul>\r\n    )\r\n}","import React,{useState,useEffect} from 'react'\r\nimport axios from 'axios';\r\nimport './index.css'\r\nimport { nanoid } from 'nanoid';\r\nimport PubSub from 'pubsub-js';\r\n\r\n//包含6个唯一id的数组，用来生成奖项\r\nconst initdata = new Array(6).fill(0).map(()=>nanoid());\r\nexport default function WheelList() {\r\n    //奖品信息\r\n    const [data, setdata] = useState([]);\r\n    //奖品index和中奖消息\r\n    const [prize,setprize] = useState();\r\n    // 旋转动画\r\n    const [rotate_animate,setrotate] = useState({angle:0,transition:'none'});\r\n    //从后台获取需要进行展示的奖品信息，并且保证为6个\r\n    \r\n    useEffect(() => {\r\n        const fetchData=async ()=>{\r\n            // 获取奖品信息\r\n            const result = await axios('https://qc1hz1.fn.thelarkcloud.com/prizeinfo');\r\n            const prize_info = result.data.response;\r\n            // 计算奖品数量，保证其为6个\r\n            const n=prize_info.length;\r\n            if(n<6){\r\n                for(let i=n;i<6;i++){\r\n                    prize_info.push({prize_name: \"谢谢参与\", isprize: false,prize_id:nanoid()});\r\n                }   \r\n            }\r\n            if(n>6){\r\n                while(prize_info.length>6){\r\n                    prize_info.pop();\r\n                }\r\n            }\r\n            setdata(prize_info);\r\n        }\r\n        fetchData();\r\n    }, [])\r\n    \r\n    //订阅消息：收到消息后进行旋转\r\n    useEffect(() => {\r\n        const token = PubSub.subscribe('Prize',(msg,item)=>{\r\n            // 保存奖品index和中奖消息msg\r\n            setprize(item);\r\n            // 计算要旋转的角度并旋转\r\n            const angle=-item.prize_index*60+3600;\r\n            setrotate({angle:angle,transition:'all 5s ease-out'});\r\n            //旋转完成后\r\n            setTimeout(() => {\r\n                //对角度进行处理，以便下次旋转\r\n                setrotate({angle:angle%360,transition:'none'});\r\n                //通知闪烁,同时把中奖消息发送过去\r\n                PubSub.publish('Twinkle',item.msg);\r\n            }, 5000);\r\n        })\r\n        return () => {\r\n            PubSub.unsubscribe(token);\r\n        }\r\n    }, [prize,rotate_animate])\r\n\r\n    return (\r\n        //中间奖品\r\n        <ul id=\"wheel\" className=\"wheel-list\" style={{\r\n            transform:`rotate(${rotate_animate.angle}deg)`,\r\n            transition:rotate_animate.transition\r\n        }} >\r\n            {\r\n                initdata.map((item,index)=>(\r\n                    <li key={item} >\r\n                        <i></i>\r\n                        <div className=\"prize\">\r\n                            <p>{data[index]?data[index].prize_name:\"\"}</p>\r\n                            <img src={`/images/prize_img${index+1}.png`} alt=\"\" />\r\n                        </div>\r\n                    </li>\r\n                ))\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport './index.css'\r\nimport axios from 'axios'\r\nimport PubSub from 'pubsub-js'\r\n\r\nexport default function WheelPointer() {\r\n    //点击按钮后从后台获取奖品index和中奖消息msg，通知Wheel-list进行旋转\r\n    const takeprize = async ()=>{\r\n        const result = await axios('https://qc1hz1.fn.thelarkcloud.com/takePrize');\r\n        PubSub.publish('Prize',result.data);\r\n    }\r\n    return (    \r\n        // 中心指针   \r\n        <div id=\"pointer\" className=\"wheel-pointer\">\r\n            <div id=\"button\" className=\"button\" onClick={takeprize} >\r\n                <strong>抽</strong>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport PubSub from 'pubsub-js';\r\nimport './index.css'\r\n\r\nexport default function Twinkle() {\r\n    //闪烁动画状态\r\n    const [twinkle_animate,settwinkle]=useState();\r\n    //订阅消息：收到消息后进行闪烁动画，之后通知Showprize展示奖品信息\r\n    useEffect(() => {\r\n        const token=PubSub.subscribe('Twinkle',(msg,item)=>{\r\n            // 进行闪烁动画\r\n            settwinkle('twinkle 0.8s');\r\n            // 通知Showprize展示奖品信息\r\n            setTimeout(() => {\r\n                settwinkle('none');\r\n                // 通知展示中奖消息\r\n                PubSub.publish('Showprize',item);\r\n            }, 1000);\r\n        })\r\n        return () => {\r\n            PubSub.unsubscribe(token);\r\n        }\r\n    }, [twinkle_animate])\r\n    return (\r\n        // 中奖后闪烁\r\n        <div className=\"twinkle-box\">\r\n            <div id=\"twinkle\" className=\"twinkle\" style={{animation:twinkle_animate}} ></div>\r\n        </div>\r\n    )\r\n}\r\n","import React,{useEffect,useState} from 'react'\r\nimport PubSub from 'pubsub-js'\r\nimport './index.css'\r\n\r\nexport default function Showprize() {\r\n    const [prizemsg,setprizemsg]=useState(\"\");\r\n    const [display,setdisplay]=useState();\r\n    // 订阅消息：收到消息后设置中奖消息，弹出中奖信息\r\n    useEffect(() => {\r\n        const token= PubSub.subscribe('Showprize',(msg,item)=>{\r\n            //设置中奖消息\r\n            setprizemsg(item);\r\n            //弹出中奖信息\r\n            setdisplay('block');\r\n        })\r\n        return () => {\r\n            PubSub.unsubscribe(token);\r\n        }\r\n    }, [prizemsg])\r\n    //关闭中奖信息\r\n    const close=()=>{\r\n        setdisplay('none');\r\n    }\r\n    return (\r\n        // 遮罩层+弹出奖品\r\n        <>\r\n            {/* 遮罩层 */}\r\n            <div className=\"mask\" style={{display:display}} ></div>\r\n            {/* 弹出奖品 */}\r\n            <div className=\"show-prize\" style={{display:display}} >\r\n                <img src=\"./images/prize.png\" alt=\"\" className=\"prize-container\"/>\r\n                <div className=\"prize-info\">{prizemsg}</div>\r\n                <img src=\"./images/close.png\" alt=\"\" className=\"close\" onClick={close} />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n","import './App.css';\nimport Wheellight from './component/Wheel-light';\nimport WheelList from './component/Wheel-list';\nimport WheelPointer from './component/Wheel-pointer';\nimport Twinkle from './component/Twinkle';\nimport Showprize from './component/Showprize';\n\nfunction App() {\n  return (\n    <>\n      {/* 抽奖轮盘：外层闪烁+中间奖品+中心指针+中奖后闪烁 */}\n      <div className=\"wheel\">\n        <Wheellight/>\n        <WheelList/>\n        <WheelPointer/>\n        <Twinkle/>\n      </div>\n      {/* 遮罩层+弹出奖品 */}\n      <Showprize/>\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport 'lib-flexible'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"]}}